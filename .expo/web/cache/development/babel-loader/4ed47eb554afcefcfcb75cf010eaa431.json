{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { FETCH_PROFILE, FETCH_PROFILE_ERROR, FETCH_PROFILE_SUCCESS, FETCH_PROFILE_ATTRIBUTE, FETCH_PROFILE_ATTRIBUTE_ERROR, FETCH_PROFILE_ATTRIBUTE_SUCCESS } from \"../actions\";\nimport { profile } from \"../../API\";\nexport var getProfile = function getProfile() {\n  return {\n    type: FETCH_PROFILE\n  };\n};\nexport var getProfileError = function getProfileError(error) {\n  return {\n    type: FETCH_PROFILE_ERROR,\n    error: error\n  };\n};\nexport var getProfileSuccess = function getProfileSuccess(profileData) {\n  return {\n    type: FETCH_PROFILE_SUCCESS,\n    payload: {\n      profileData: profileData\n    }\n  };\n};\nexport var getProfileAttribute = function getProfileAttribute() {\n  return {\n    type: FETCH_PROFILE_ATTRIBUTE\n  };\n};\nexport var getProfileAttributeError = function getProfileAttributeError(error) {\n  return {\n    type: FETCH_PROFILE_ATTRIBUTE_ERROR,\n    error: error\n  };\n};\nexport var getProfileAttributeSuccess = function getProfileAttributeSuccess(attributeIndex, attributeValue) {\n  return {\n    type: FETCH_PROFILE_ATTRIBUTE_SUCCESS,\n    payload: {\n      attributeIndex: attributeIndex,\n      attributeValue: attributeValue\n    }\n  };\n};\nexport var setAttribute = function setAttribute(attributeIndex, attributeValue) {\n  return {};\n};\nexport var getProfileAsync = function getProfileAsync(subId) {\n  return function (dispatch) {\n    dispatch(getProfile());\n    return profile.get(subId).then(function (_ref) {\n      var _ref$data = _ref.data,\n          success = _ref$data.success,\n          errorMessage = _ref$data.message,\n          action = _ref$data.action,\n          profileData = _objectWithoutProperties(_ref$data, [\"success\", \"message\", \"action\"]);\n\n      if (success) {\n        var formattedProfileData = _objectSpread({}, profileData);\n\n        Object.keys(formattedProfileData.attributes).map(function (attributeIndex) {\n          formattedProfileData.attributes[attributeIndex] = JSON.parse(formattedProfileData.attributes[attributeIndex]);\n        });\n        console.log(\"Formatted: \", formattedProfileData);\n        dispatch(getProfileSuccess(formattedProfileData));\n      } else {\n        dispatch(getProfileError(new Error(errorMessage)));\n      }\n    }).catch(function (error) {\n      dispatch(getProfileError(error));\n    });\n  };\n};\nexport var getProfileAttributeAsync = function getProfileAttributeAsync(attributeName, accessToken) {\n  return function (dispatch) {\n    dispatch(getProfileAttribute());\n    return profile.getAttribute(attributeName, accessToken).then(function (_ref2) {\n      var _ref2$data = _ref2.data,\n          success = _ref2$data.success,\n          errorMessage = _ref2$data.message,\n          data = _objectWithoutProperties(_ref2$data, [\"success\", \"message\"]);\n\n      if (success) {\n        dispatch(getProfileAttributeSuccess(attributeName, JSON.parse(data[attributeName])));\n      } else {\n        dispatch(getProfileAttributeError(new Error(errorMessage)));\n      }\n    }).catch(function (error) {\n      dispatch(getProfileAttributeError(error));\n    });\n  };\n};","map":{"version":3,"sources":["/Users/thadz/Desktop/SunSavings/fixedProfileAndTransfer/pnmobileapp/src/redux/profile/actions.js"],"names":["FETCH_PROFILE","FETCH_PROFILE_ERROR","FETCH_PROFILE_SUCCESS","FETCH_PROFILE_ATTRIBUTE","FETCH_PROFILE_ATTRIBUTE_ERROR","FETCH_PROFILE_ATTRIBUTE_SUCCESS","profile","getProfile","type","getProfileError","error","getProfileSuccess","profileData","payload","getProfileAttribute","getProfileAttributeError","getProfileAttributeSuccess","attributeIndex","attributeValue","setAttribute","getProfileAsync","subId","dispatch","get","then","data","success","errorMessage","message","action","formattedProfileData","Object","keys","attributes","map","JSON","parse","console","log","Error","catch","getProfileAttributeAsync","attributeName","accessToken","getAttribute"],"mappings":"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","sourcesContent":["import {\n  FETCH_PROFILE,\n  FETCH_PROFILE_ERROR,\n  FETCH_PROFILE_SUCCESS,\n  FETCH_PROFILE_ATTRIBUTE,\n  FETCH_PROFILE_ATTRIBUTE_ERROR,\n  FETCH_PROFILE_ATTRIBUTE_SUCCESS,\n} from \"../actions\";\n\nimport { profile } from \"../../API\";\n\n/***********************\n * ACTION CREATORS\n ***********************/\n\nexport const getProfile = () => ({\n  type: FETCH_PROFILE,\n});\n\nexport const getProfileError = (error) => ({\n  type: FETCH_PROFILE_ERROR,\n  error,\n});\n\nexport const getProfileSuccess = (profileData) => ({\n  type: FETCH_PROFILE_SUCCESS,\n  payload: {\n    profileData,\n  },\n});\n\nexport const getProfileAttribute = () => ({\n  type: FETCH_PROFILE_ATTRIBUTE\n});\n\nexport const getProfileAttributeError = (error) => ({\n  type: FETCH_PROFILE_ATTRIBUTE_ERROR,\n  error\n});\n\nexport const getProfileAttributeSuccess = (attributeIndex, attributeValue) => ({\n  type: FETCH_PROFILE_ATTRIBUTE_SUCCESS,\n  payload: {\n    attributeIndex,\n    attributeValue\n  }\n});\n\nexport const setAttribute = (attributeIndex, attributeValue) => ({\n  \n})\n\n/***********************\n * API WITH DISPATCH\n ***********************/\n\nexport const getProfileAsync = (subId) => {\n  return (dispatch) => {\n    dispatch(getProfile());\n    return profile\n      .get(subId)\n      .then(({ data: { success, message: errorMessage, action, ...profileData } }) => {\n        if (success) {\n          const formattedProfileData = { ...profileData };\n          Object.keys(formattedProfileData.attributes)\n            .map((attributeIndex) => {\n              formattedProfileData.attributes[attributeIndex] = JSON.parse(formattedProfileData.attributes[attributeIndex])\n            })\n\n          console.log(\"Formatted: \", formattedProfileData)\n          dispatch(getProfileSuccess(formattedProfileData));\n        } else {\n          dispatch(getProfileError(new Error(errorMessage)))\n        }\n      })\n      .catch((error) => {\n        dispatch(getProfileError(error));\n      });\n  };\n};\n\nexport const getProfileAttributeAsync = (attributeName, accessToken) => {\n  return dispatch => {\n    dispatch(getProfileAttribute())\n    return profile.getAttribute(attributeName, accessToken)\n      .then(({ data: { success, message: errorMessage, ...data} }) => {\n        if(success) {\n          dispatch(getProfileAttributeSuccess(attributeName, JSON.parse(data[attributeName])))\n        } else {\n          dispatch(getProfileAttributeError(new Error(errorMessage)));\n        }\n      })\n      .catch((error) => {\n        dispatch(getProfileAttributeError(error));\n      })\n  }\n}\n"]},"metadata":{},"sourceType":"module"}